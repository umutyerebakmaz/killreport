type JitaPrice {
  "Highest buy order (instant sell price)"
  buy: Float!
  "Lowest sell order (instant buy price)"
  sell: Float!
  "Average of buy and sell"
  average: Float!
  "Total market volume"
  volume: Float
  "Data source timestamp"
  updatedAt: String!
}

type Type {
  id: Int!
  name: String!
  description: String
  group: ItemGroup
  published: Boolean!
  volume: Float
  capacity: Float
  mass: Float
  icon_id: Int
  created_at: String!
  updated_at: String!
  "Jita market price (cached, updates every 4 hours)"
  jitaPrice: JitaPrice
  dogmaAttributes(ids: [Int!]): [TypeDogmaAttribute!]!
  dogmaEffects(ids: [Int!]): [TypeDogmaEffect!]!
}

type TypeDogmaAttribute {
  type_id: Int!
  attribute_id: Int!
  value: Float!
  attribute: DogmaAttribute!
}

type TypeDogmaEffect {
  type_id: Int!
  effect_id: Int!
  is_default: Boolean!
  effect: DogmaEffect!
}

type TypesResponse {
  items: [Type!]!
  pageInfo: PageInfo!
}

input TypeFilter {
  page: Int
  limit: Int
  name: String
  group_id: Int
  groupList: [Int!]
  categoryList: [Int!]
  published: Boolean
}

input StartTypeSyncInput {
  clientMutationId: String
}

type StartTypeSyncPayload {
  success: Boolean!
  message: String
  clientMutationId: String
}

input StartTypeDogmaSyncInput {
  clientMutationId: String
  typeIds: [Int!] # Optional: Specific type IDs to sync. If empty, sync all types
}

type StartTypeDogmaSyncPayload {
  success: Boolean!
  message: String
  queuedCount: Int
  clientMutationId: String
}

extend type Query {
  type(id: Int!): Type
  types(filter: TypeFilter): TypesResponse!
}

extend type Mutation {
  startTypeSync(input: StartTypeSyncInput!): StartTypeSyncPayload!
  startTypeDogmaSync(
    input: StartTypeDogmaSyncInput!
  ): StartTypeDogmaSyncPayload!
}
