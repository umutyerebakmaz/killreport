extend type Query {
  """
  Get current status of all workers and queues
  """
  workerStatus: WorkerStatus!
}

type Subscription {
  """
  Subscribe to real-time worker status updates
  Emits updates every 5 seconds
  """
  workerStatusUpdates: WorkerStatus!
}

type WorkerStatus {
  """
  Timestamp of the status check
  """
  timestamp: String!

  """
  Status of individual queues (RabbitMQ-based workers)
  """
  queues: [QueueStatus!]!

  """
  Status of standalone workers (non-RabbitMQ)
  """
  standaloneWorkers: [StandaloneWorkerStatus!]!

  """
  Overall system health
  """
  healthy: Boolean!
}

type QueueStatus {
  """
  Name of the queue
  """
  name: String!

  """
  Number of messages waiting to be processed
  """
  messageCount: Int!

  """
  Number of active consumers processing from this queue
  """
  consumerCount: Int!

  """
  Is there at least one active consumer
  """
  active: Boolean!

  """
  Is the worker process running (detected via ps aux)
  """
  workerRunning: Boolean!

  """
  Process ID of the running worker
  """
  workerPid: Int

  """
  Worker script name (e.g., worker:info:corporations)
  """
  workerName: String
}

type StandaloneWorkerStatus {
  """
  Name of the worker
  """
  name: String!

  """
  Is the worker currently running
  """
  running: Boolean!

  """
  Process ID if running
  """
  pid: Int

  """
  Description of what this worker does
  """
  description: String!
}
