type Alliance {
  id: Int!
  name: String!
  ticker: String!
  date_founded: String!
  executor: Corporation
  createdByCorporation: Corporation
  createdBy: Character
  faction_id: Int
  corporations: [Corporation!]!
  corporationCount: Int!
  memberCount: Int!
  metrics: AllianceMetrics
  snapshots(days: Int): [AllianceSnapshot!]!
}

enum AllianceOrderBy {
  nameAsc
  nameDesc
  memberCountAsc
  memberCountDesc
}

type AllianceMetrics {
  memberCountDelta1d: Int
  memberCountDelta7d: Int
  memberCountDelta30d: Int
  corporationCountDelta1d: Int
  corporationCountDelta7d: Int
  corporationCountDelta30d: Int
  memberCountGrowthRate1d: Float
  memberCountGrowthRate7d: Float
  memberCountGrowthRate30d: Float
  corporationCountGrowthRate1d: Float
  corporationCountGrowthRate7d: Float
  corporationCountGrowthRate30d: Float
}

type AllianceSnapshot {
  date: String!
  memberCount: Int!
  corporationCount: Int!
}

type AllianceEdge {
  node: Alliance!
  cursor: String!
}

type AllianceConnection {
  edges: [AllianceEdge!]!
  pageInfo: PageInfo!
}

type PageInfo {
  currentPage: Int!
  totalPages: Int!
  totalCount: Int!
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
}

input AllianceFilter {
  page: Int
  limit: Int
  search: String
  name: String
  ticker: String
  dateFoundedFrom: String
  dateFoundedTo: String
  orderBy: AllianceOrderBy
}

input StartAllianceSyncInput {
  clientMutationId: String
}

type StartAllianceSyncPayload {
  success: Boolean!
  message: String
  clientMutationId: String
}

extend type Query {
  alliance(id: Int!): Alliance
  alliances(filter: AllianceFilter): AllianceConnection!
}

extend type Mutation {
  startAllianceSync(input: StartAllianceSyncInput!): StartAllianceSyncPayload!
}
