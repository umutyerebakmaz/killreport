input AddCharacterInput {
  corporation: String
  name: String!
  userId: ID!
}

type Alliance {
  creator_corporation_id: Int!
  creator_id: Int!
  date_founded: String!
  executor_corporation_id: Int!
  faction_id: Int
  id: Int!
  name: String!
  ticker: String!
}

input AllianceFilter {
  limit: Int
  name: String
  page: Int
  search: String
  ticker: String
}

type AlliancesResponse {
  data: [Alliance!]!
  pageInfo: PageInfo!
}

type Attacker {
  characterId: Int
  characterName: String
  corporationId: Int
  finalBlow: Boolean
  shipTypeId: Int
  weaponTypeId: Int
}

type AuthPayload {
  """JWT access token"""
  accessToken: String!

  """Token geçerlilik süresi (saniye)"""
  expiresIn: Int!

  """Token yenilemek için kullanılan refresh token"""
  refreshToken: String

  """Authenticated kullanıcı bilgileri"""
  user: User!
}

type AuthUrl {
  """CSRF koruması için state parametresi"""
  state: String!

  """Eve Online SSO authorization URL'i"""
  url: String!
}

type Character {
  alliance: String
  corporation: String
  id: ID!
  name: String!
  securityStatus: Float
  user: User
}

input CreateUserInput {
  email: String!
  name: String!
}

type Killmail {
  attackers: [Attacker!]!
  id: ID!
  killmailHash: String!
  killmailId: Int!
  killmailTime: String!
  totalValue: Float
  victim: Victim!
}

type Mutation {
  addCharacter(input: AddCharacterInput!): Character!

  """Authorization code ile authentication yapar ve token döner"""
  authenticateWithCode(code: String!, state: String!): AuthPayload!
  createUser(input: CreateUserInput!): User!

  """Eve Online SSO login için authorization URL'i oluşturur"""
  login: AuthUrl!

  """Refresh token kullanarak yeni access token alır"""
  refreshToken(refreshToken: String!): AuthPayload!
  startAllianceSync: Boolean

  """
  Kullanıcının killmail'lerini ESI'dan çeker ve database'e kaydeder
  Requires: Authentication
  """
  syncMyKillmails: SyncResult!
  updateUser(id: ID!, input: UpdateUserInput!): User
}

type PageInfo {
  currentPage: Int!
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  nextCursor: Int
  previousCursor: Int
  totalCount: Int!
  totalPages: Int!
}

type Query {
  alliance(id: Int!): Alliance
  alliances(filter: AllianceFilter): AlliancesResponse!
  character(id: ID!): Character
  charactersByUser(userId: ID!): [Character!]!

  """Tek bir killmail'i getirir"""
  killmail(id: ID!): Killmail

  """Tüm killmail'leri listeler (pagination ile)"""
  killmails(limit: Int, offset: Int): [Killmail!]!

  """Mevcut authenticated kullanıcının bilgilerini döner"""
  me: User

  """
  Login olan kullanıcının kendi killmail'lerini getirir
  Requires: Authentication
  """
  myKillmails(limit: Int): [Killmail!]!
  user(id: ID!): User
  users: [User!]!
}

type SyncResult {
  message: String!
  success: Boolean!
  syncedCount: Int!
}

input UpdateUserInput {
  email: String
  name: String
}

type User {
  createdAt: String!
  email: String!
  id: ID!
  name: String!
}

type Victim {
  characterId: Int
  characterName: String
  corporationId: Int
  corporationName: String
  damageTaken: Int
  shipTypeId: Int
}